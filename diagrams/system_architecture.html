<!DOCTYPE html>
<html>
<head>
    <title>Desktop Commander System Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.1/dist/mermaid.min.js"></script>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        .mermaid { margin-top: 30px; border: 1px solid #eee; padding: 20px; border-radius: 8px; box-shadow: 2px 2px 8px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <h1>Desktop Commander System Architecture</h1>
    <pre class="mermaid">
        graph TD
            A[Claude Desktop] -->|Calls Tools via MCP| B(Desktop Commander Server);
            B -->|Tool Definitions| C(src/server.ts);
            C -->|Routes Requests| D{Tool Handlers};
            D -->|Filesystem Ops| E(src/handlers/filesystem-handlers.ts);
            D -->|Terminal Ops| F(src/handlers/terminal-handlers.ts);
            D -->|Process Ops| G(src/handlers/process-handlers.ts);
            D -->|Edit/Search Ops| H(src/handlers/edit-search-handlers.ts);

            E -->|Uses Low-Level FS Tools| I(src/tools/filesystem.ts);
            F -->|Uses Low-Level Exec Tools| J(src/tools/execute.ts);
            G -->|Uses Low-Level Process Tools| K(src/tools/process.ts);
            H -->|Uses Low-Level Edit/Search Tools| L("src/tools/edit.ts & src/tools/search.ts & src/tools/fuzzySearch.ts");

            B -->|Manages Config| M(src/config-manager.ts);
            M -->|Reads/Writes| N[config.json];

            I --> O[Local File System];
            J --> P[Terminal/Shell];
            K --> Q[OS Processes];
            L --> O; % Edit/Search also interacts with File System

            subgraph Desktop Commander Application
                B
                C
                D
                E
                F
                G
                H
                I
                J
                K
                L
                M
            end

            subgraph External Systems
                A
                N
                O
                P
                Q
            end
    </pre>

    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
</body>
</html>